<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns:fx="http://javafx.com/fxml" fx:controller="com.sep3.client.view.ReportsViewController" spacing="20" styleClass="list-view">
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="10">
        <Label text="ðŸ“ˆ Reports &amp; Analytics" styleClass="view-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="refreshButton" text="ðŸ”„ Refresh" onAction="#handleRefresh" styleClass="secondary-button"/>
    </HBox>
    
    <!-- Stats Cards -->
    <HBox spacing="15" alignment="CENTER_LEFT">
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Total Products" styleClass="stat-label"/>
            <Label fx:id="totalProductsLabel" text="0" styleClass="stat-value"/>
        </VBox>
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Total Orders" styleClass="stat-label"/>
            <Label fx:id="totalOrdersLabel" text="0" styleClass="stat-value"/>
        </VBox>
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Low Stock Items" styleClass="stat-label"/>
            <Label fx:id="lowStockLabel" text="0" styleClass="stat-value"/>
        </VBox>
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Total Revenue" styleClass="stat-label"/>
            <Label fx:id="totalRevenueLabel" text="0 DKK" styleClass="stat-value"/>
        </VBox>
    </HBox>
    
    <!-- Charts Row 1 -->
    <HBox spacing="15" VBox.vgrow="ALWAYS">
        <!-- Products by Category Chart -->
        <VBox styleClass="chart-container" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
            <Label text="Products by Category" styleClass="chart-title"/>
            <PieChart fx:id="categoryChart" VBox.vgrow="ALWAYS"/>
        </VBox>
        
        <!-- Stock Levels Chart -->
        <VBox styleClass="chart-container" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
            <Label text="Stock Levels Overview" styleClass="chart-title"/>
            <BarChart fx:id="stockChart" VBox.vgrow="ALWAYS">
                <xAxis>
                    <CategoryAxis fx:id="stockCategoryAxis" label="Stock Status"/>
                </xAxis>
                <yAxis>
                    <NumberAxis fx:id="stockValueAxis" label="Number of Products"/>
                </yAxis>
            </BarChart>
        </VBox>
    </HBox>
    
    <!-- Charts Row 2 -->
    <HBox spacing="15" VBox.vgrow="ALWAYS">
        <!-- Orders by Status Chart -->
        <VBox styleClass="chart-container" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
            <Label text="Orders by Status" styleClass="chart-title"/>
            <PieChart fx:id="orderStatusChart" VBox.vgrow="ALWAYS"/>
        </VBox>
        
        <!-- Top Products Chart -->
        <VBox styleClass="chart-container" VBox.vgrow="ALWAYS" HBox.hgrow="ALWAYS">
            <Label text="Top 10 Products by Stock Value" styleClass="chart-title"/>
            <BarChart fx:id="topProductsChart" VBox.vgrow="ALWAYS">
                <xAxis>
                    <CategoryAxis fx:id="productAxis" label="Products"/>
                </xAxis>
                <yAxis>
                    <NumberAxis fx:id="valueAxis" label="Value (DKK)"/>
                </yAxis>
            </BarChart>
        </VBox>
    </HBox>
    
    <!-- Error/Loading -->
    <HBox alignment="CENTER" spacing="10">
        <ProgressIndicator fx:id="loadingIndicator" visible="false" maxHeight="30" maxWidth="30"/>
        <Label fx:id="errorLabel" styleClass="error-label"/>
    </HBox>
</VBox>

